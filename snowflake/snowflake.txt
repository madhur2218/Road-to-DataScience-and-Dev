--Getting to know Interface

create database snowflake_sample_data from share sfc_samples.sample_data;

grant import privileges on database snowflake_sample_data to role public

//Select database
SELECT * FROM SNOWFLAKE_SAMPLE_DATA.TPCH_SF1.CUSTOMER


//Snowflake Architecture
	1. Storage- data is stored in amazon s3 buckets
				hybrid columnar storage
				
	2. Query processing(virtual warehouses) - muscle of system. Performes multiple parallel processing.
	3. Cloud services - Brain of system. Managing infra, security, access control, optimizer, metadata etc.
	
-Virtual Warehouses are virtual servers and can have different sizes. Everytime we execute a complex query, more time it would take to execute
	hence more server it would require.
-Multi-clustering can also be done on warehouses and improving the execution process.

**Snowflake Architecture in Layman Terms**

Imagine Snowflake as a **pizza delivery service** where you can order your favorite pizza anytime. Here's how it works:

---

1. **Cloud Services Layer (Customer Service)**:
   - This is like the call center or app where you place your order.
   - They make sure your order details (pizza type, size, toppings) are correct, secure your payment, and track your order status.
   - They also figure out the best way to prepare and deliver your pizza efficiently.

---

2. **Compute Layer (Pizza Chefs)**:
   - These are the chefs in the kitchen preparing your pizza.
   - Each chef works independently, so even if there are many orders, they don’t interfere with each other.
   - If more people order pizza (like during game night), the restaurant can bring in extra chefs to handle the rush and scale back down afterward.

---

3. **Storage Layer (Pantry)**:
   - This is the storage area where all the ingredients (dough, cheese, toppings) are kept.
   - The pantry is always stocked and shared by all chefs, but each chef accesses only the ingredients they need.
   - The pantry is super organized, so chefs can quickly find what they need without wasting time.

---

### Example:
If you want a **Pepperoni Pizza**, here's how Snowflake works:

1. **You place your order** (run a query).
2. **Customer Service (Cloud Services Layer)** records your request, confirms details, and ensures the chefs know what to do.
3. **Chefs (Compute Layer)** prepare your pizza. If it’s a busy day, more chefs are brought in to keep up with orders.
4. **Pantry (Storage Layer)** provides the ingredients for the pizza. The pantry is separate from the chefs, so it can handle more ingredients without slowing down the kitchen.

---

This system ensures your pizza (query result) is delivered **fast**, **accurately**, and **even during a busy rush** without breaking a sweat.


--Setting up warehouse in snowflake
	1. GUI
	2. SQL
	
	//Sql command to create new WAREHOUSE
CREATE WAREHOUSE MY_DUMMY_WAREHOUSE
WITH 
WAREHOUSE_SIZE = XSMALL
MAX_CLUSTER_COUNT=3
AUTO_SUSPEND = 300 //THIS IS IN SECONDS
AUTO_RESUME = TRUE
COMMENT = 'THIS IS MY SECOND WAREHOUSE'

//dELETING A WAREHOUSE
DROP WAREHOUSE MY_DUMMY_WAREHOUSE

--Scaling policies
	-Here comes the concept of multi-clustering and autoscaling
	say if we a query, this would be processed by single warehouse
	Auto scaling: when to start an additional cluster??
	There are 2 scaling policies - Standard (favours starting additional warehouses)
								 - Economy (favours conserving credits rather than starting additional warehouses)
								 
								 
--Exploring our databases: creating databases and running them in worksheet
	SELECT * FROM FIRST_DB.FIRST_SCHEMA.MY_FIRST_TABLE
drop table FIRST_DB.FIRST_SCHEMA.MY_FIRST_TABLE
	
	